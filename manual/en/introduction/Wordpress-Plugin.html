<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Verge3D WordPress plugin - Soft8Soft</title>
    <meta charset="utf-8">
    <meta name="description" content="How to setup and use the Verge3D WordPress plugin for the purposes of publishing and e-commerce."/>
    <base href="../../../" />
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body><article>
    <h1>WordPress Plugin</h1>

    <p>
      Verge3D comes with a plugin for WordPress, the most popular content management system (CMS) in use (60+ million installations).
    </p>

    <p>Verge3D for WordPress plugin offers the following features:</p>
    <ul>
      <li>Application hosting and publishing (direct, via iframes, or WordPress shortcodes).</li>
      <li>Integration with WooCommerce system which supports embedding Verge3D applications in product pages. Simple, Grouped, Variable, or External/Affiliate products supported.</li>
      <li>Persistent file storage.</li>
      <li>E-commerce system for placing customer orders, submitted with the <a href="manual/en/puzzles/ECommerce.html#place_order" target="_parent">place order</a>, <a href="manual/en/puzzles/ECommerce.html#place_order_adv" target="_parent">place order+</a>, or <a href="manual/en/puzzles/Advanced.html#send_data" target="_parent">send data</a> puzzles.</li>
      <li>Quotes and invoices generator.</li>
      <li>PayPal or card payments.</li>
      <li>Support for downloadable products.</li>
    </ul>

    <p>These features can work independently on each other. For example, you might want just the embedding, or you can handle orders received from a Verge3D application hosted somewhere else (such as on Verge3D Network etc).</p>

    <h2>Contents</h2>

    [contents]


    [anchor:sandbox]

    <h2>Plugin sandbox</h2>

    <p>To try out the features of the plugin please check out the <a href="https://sandbox.soft8soft.com" target="_blank">Verge3D for WordPress sandbox</a>. It provides a safe environment that you can use to test your Verge3D apps.</p>


    [anchor:installation]

    <h2>Installation</h2>

    <p>Before installing the plugin, make sure you have at least WordPress 5.0. To upload applications on your server you need to have a modern browser such as Google Chrome, Firefox, Edge or Safari.</p>

    <p>To install, simply:</p>

    <ul>
      <li>Click <strong>Add New</strong> on the Plugins settings page from your WordPress admin dashboard.</li>
      <li>Find the Verge3D plugin in the official WordPress.org <a href="https://wordpress.org/plugins/verge3d/" target="_blank">repository</a> and install it.</li>
      <li>Activate the plugin. <strong>Verge3D</strong> menu should appear in the admin panel.</li>
    </ul>

    <p>In some cases, you might need to install the plugin from the Verge3D distribution (for example, when you're going  to try a new feature available in the pre-release version of Verge3D). To do so, follow these steps:</p>
    <ul>
      <li>Upload the plugin archive from <em>verge3d/wordpress/verge3d.zip</em> via WordPress admin interface.</li>
      <li>Activate the plugin in the <strong>Plugins</strong> menu. <strong>Verge3D</strong> menu should appear in the admin panel.</li>
    </ul>

    <p>After activation, try to upload some of your apps or create a test order to verify that plugin works as expected.</p>

    <p class="note">
      Please note, that your WordPress server configuration might have tight upload limits. If you experience troubles during uploading of your apps, you need to tweak the following settings in your php.ini file:
      <code>upload_max_filesize = 128M
post_max_size = 128M</code>
      Check out the official <a href="http://php.net/manual/en/ini.core.php" target="_blank">PHP documentation</a> for more info about php.ini configuration.
    </p>


    [anchor:uploading_applications]

    <h2>Uploading applications</h2>

    <p>Use the <strong>Applications</strong> admin menu to access <strong>Verge3D Applications</strong> screen:</p>

    <img src="files/wordpress/app.png" alt="Verge3D for WordPress applications">

    <p>
      To upload new app, click <strong>Add New</strong> button, enter app name, then click <strong>Next</strong>. You'll see *Manage Verge3D Application* dialog. Click <strong>Choose Files</strong>, select an application folder, then click *Upload*:
    </p>

    <img src="files/wordpress/upload-app.jpg" alt="Uploading Verge3D app to WordPress">

    <p>On this form you can also configure iframe (canvas) size of your application and allow/deny fullscreen mode.</p>

    <p>To embed Verge3D applications in your WordPress pages/posts use the following shortcode:</p>

    <code>[verge3d id="YOUR_APP_ID"]</code>

    <p>where <em>YOUR_APP_ID</em> is an ID of your application displayed in the table on the <strong>Verge3D Application</strong> screen.</p>


    [anchor:woocommerce]

    <h2>Integrating with WooCommerce</h2>

    <p>WooCommerce is a popular e-commerce system which powers over 28% of all online stores. Verge3D offers a seamless integration with WooCommerce via this WordPress plugin and <a href="manual/en/puzzles/ECommerce.html">e-commerce puzzles</a>.</p>

    <p>Please refer to <a href="https://www.soft8soft.com/making-3d-product-configurator-for-woocommerce/" target="_blank">this tutorial article</a> for the info on how to use this feature. You may also check out the following <a href="https://www.youtube.com/watch?v=dJdUKwSxA8c" target="_blank">video</a>.</p>

    [demo:drink_shop]


    [anchor:uploading_files]

    <h2>Uploading files</h2>

    <p>This feature allows the users to persistently store content created in Verge3D applications, such as taken screenshots, uploaded textures, and saved configurations.</p>

    <p>To upload your file on the server use the following REST API method:</p>

    <code class="language-html">https://HOSTNAME/wp-json/verge3d/v1/upload_file/</code>

    <p>Where HOSTNAME is the host name of your WordPress server, such as <em>sandbox.soft8soft.com</em></p>

    <p>Upon success this method returns the following JSON file with the info on the uploaded file:</p>
    <code>
    {
        "id": THE_ID_OF_THE_UPLOADED_FILE,
        "link": LINK_TO_THE_UPLOADED_FILE,
        "size": FILE_SIZE
    }</code>

    <p>Use the link provided in the request to retrieve your file or use the ID and <em>get_file</em> REST API method:</p>

    <code class="language-html">https://HOSTNAME/wp-json/verge3d/v1/get_file/ID</code>

    <h3>Using puzzles</h3>

    <p>Use the <strong>send data</strong> and <strong>loaded data</strong> puzzles to upload your files. Parse the JSON fields of the API response by using the <strong>in dict ... get key ...</strong> puzzle.</p>
    <p>The example below uploads the user-selected file specified in the "opened file" puzzle to the Soft8Soft sandbox and then saves the web address to that file in the <strong>link</strong> variable:</p>

    <img src="files/wordpress/send_load_puzzles.png">

    <p>To retrieve/download your files use the <strong>load data</strong> and <strong>loaded data</strong> puzzles.</p>

    [demo:custom_image]


    [anchor:receiving_orders_with_order_form]

    <h2>Receiving orders with order form</h2>

    <p>To handle regular orders sent by your Verge3D applications (by the <a href="manual/en/puzzles/ECommerce.html#place_order" target="_parent">place order</a> or <a href="manual/en/puzzles/ECommerce.html#place_order_adv" target="_parent">place order+</a> puzzles), add an order form to some of your WordPress page/post using the following shortcode:</p>

    <code>[verge3d_order]</code>

    <p>Then specify the link to that page/post as the "send to" parameter of the *place order*/<strong>place order +</strong> puzzles. Each time this puzzle is executed, your app will redirect users to your order form:</p>

    <img src="files/wordpress/order-form.jpg" style="max-width: 867px;">

    [demo:ring]


    [anchor:receiving_orders_rest_api]

    <h2>Receving orders in background via REST API</h2>

    <p>In some cases you might want to create custom experience for placing orders instead of redirecting users to the order page.</p>

    <p>Say you want to create a basic table customizer. This is how your data might look like:</p>

    <code>
    {
        "user_name": "John Smith",
        "user_email": "john.smith@example.com",
        "user_phone": "+123456789"
        "items": [
            {
                "sku": "table_top_white",
                "quantity": 1
            },
            {
                "sku": "table_leg_brown",
                "quantity": 4
            },
        ]
    }</code>

    <p>You can compose this structure using the dictionary puzzles and then send it to the server using the "send data" puzzle.</p>

    <p>To do this, assign a proper URL for your "send data" puzzle. This one looks like:</p>

    <code class="language-html">https://HOSTNAME/wp-json/verge3d/v2/place_order/</code>

    <p>Where HOSTNAME is the host name of your WordPress server, such as <em>sandbox.soft8soft.com</em></p>


    [anchor:managing_orders]

    <h2>Managing orders</h2>

    <p>Use the <strong>Orders</strong> admin menu to access <strong>E-Commerce Orders</strong> screen:</p>

    <img src="files/wordpress/orders.png">

    <p>The orders in this list are created automatically upon receiveing requests from Verge3D applications. You can use this screen for reviewing and managing customer orders.</p>


    [anchor:managing_products]

    <h2>Managing products</h2>

    <p>
      Use the <strong>Products</strong> admin menu to access <strong>E-Commerce Products</strong> screen:
    </p>

    <img src="files/wordpress/products.jpg">

    <p>Each product has the following fields:</p>

    <dl>
      <dt>Title</dt>
      <dd>Human-readable product title such as "Verge3D for Blender" or "Spinner". This field is mandatory.</dd>
      <dt>SKU</dt>
      <dd>Product stock keeping unit. This value is used not only to manage orders by merchant, but primarily to reference product items in the <strong>place order +</strong> or <strong>send data</strong> puzzles. Basically, this value is used as product ID.</dd>
      <dt>Price</dt>
      <dd>Product price. Can be set to zero.</dd>
      <dt>Download link</dt>
      <dd>Optional link to a downloadable product.</dd>
    </dl>


    [anchor:geting_product_info]

    <h2>Getting info about products</h2>

    <p>This feature allows the users receive information about products stored on server.</p>

    <p>To use it, execute the following REST API method:</p>

    <code class="language-html">https://HOSTNAME/wp-json/verge3d/v1/get_product_info/SKU</code>

    <p>Where HOSTNAME is the host name of your WordPress server, such as <em>sandbox.soft8soft.com</em>, and SKU is the product SKU.</p>

    <p>Upon success, this method returns the following JSON file with the product info:</p>
    <code>
    {
        "status": "ok",
        "title": "Product Title",
        "sku": "SKU",
        "price": "Product price"
        "currency": "Currency symbol, such as $"
    }</code>

    <h3>Using puzzles</h3>

    <p>
      Use the <strong>load data</strong> and <strong>loaded data</strong> puzzles to get info about your products:
    </p>

    <img src="files/wordpress/get_product_info_puzzles.jpg">


    [anchor:plug_in_settings]

    <h2>Plugin settings</h2>

    <p>Use <strong>Settings</strong> admin menu to modify the plugin global settings:</p>

    <img src="files/wordpress/settings.jpg">

    <h3>General tab</h3>

    <dl>
      <dt>Currency</dt>
      <dd>Currency used to store/display prices.</dd>
      <dt>Price decimals</dt>
      <dd>Number of decimal digits used to display prices.</dd>
      <dt>Merchant info</dt>
      <dd>Merchant info: company/brand, address, contacts, logo etc.</dd>
      <dt>Order form fields</dt>
      <dd>The fields your orders should include.</dd>
      <dt>Order success text</dt>
      <dd>Text to display when order successfully placed.</dd>
      <dt>Order failed text</dt>
      <dd>Text to display when order failed.</dd>
    </dl>

    <h3>Mail tab</h3>

    <dl>
      <dt>Order notification e-mail</dt>
      <dd>Option is used to specify an e-mail address of the person responsible for managing orders. When a customer places a new order, you will be notified about this order on this e-mail.</dd>
      <dt>Order e-mails "From"</dt>
      <dd>Option is used to specify a name/e-mail of a person/organisation that is responsible for communicating with the customer. This can be a sales manager e-mail, some common address such as <em>sales@yourcompany.com</em> or just a no-reply address such as <em>noreply@yourcompany.com</em>.</dd>
      <dt>New order notifications</dt>
      <dd>Use these options to configure to whom new order notification emails will be sent to as well as subject, content and attachments of such emails.</dd>
      <dt>Updated order notifications</dt>
      <dd>Use these options to configure to whom order update notification emails will be sent to as well as subject, content and attachments of such emails.</dd>
      <dt>Sales quotes</dt>
      <dd>Use these options to configure subject and content of quote emails sent to your customers.</dd>
      <dt>Invoices</dt>
      <dd>Use these options to configure subject and content of invoice emails sent to your customers.</dd>
    </dl>

    <h3>Documents tab</h3>

    <p>To use this feature properly you need to install Chrome/Chromium browser on your server. It will be operated in the so-called <a href="https://developers.google.com/web/updates/2017/04/headless-chrome" target="_blank">headless mode</a> to convert HTML orders to PDF format. Specify the path to the Chrome/Chromium executable if you installed it in some custom directory or leave the path field blank if you installed it system-wide.</p>
    <p>Please note, that it order to install Chrome system-wide you need to have admin access to the server. If you don't, download <a href="https://www.chromium.org/getting-involved/download-chromium" target="_blank">latest Chromium build</a>, unpack it in some user-accessible directory on your server and then specify the path to the Chromium executable in the path field (e.g <em>/home/ubuntu/chrome-linux/chrome)</em>.</p>

    <dl>
      <dt>PDF Generator</dt>
      <dd>Path to the Chrome/Chromium browser to perform PDF conversion. Leave blank if you installed it system-wide.</dd>
      <dt>Quotes</dt>
      <dd>Additional content displayed in quote documents and time the quote is considered valid.</dd>
      <dt>Invoices</dt>
      <dd>Additional content displayed in invoice documents.</dd>
    </dl>

    <h3>Payment tab</h3>

    <dl>
      <dt>Paid status</dt>
      <dd>Order status to set for successfull payments. For example, if you're selling physical goods, you might want to set the order status to *Processing*, that means that you're processing the order for shipment. If you're selling digital goods, you might want to set the status to *Completed*. In this case, the download link will be send to the customer by email.</dd>
      <dt>PayPal</dt>
      <dd>PayPal payment method activation checker and app's client ID. Use the following <a href="https://developer.paypal.com/developer/applications/" target="_blank">page</a> for instructions on how to optain it.</dd>
    </dl>

    <h3>Security tab</h3>

    <p>
      To make your server more secure, always disable features you don't use.
    </p>

    <dl>
      <dt>Enable REST APIs</dt>
      <dd>Options are used to enable/disable the order management, persistent file storage, or product APIs provided by the plugin.</dd>
      <dt>Cross-domain requests</dt>
      <dd>Options is used to enable/disable cross-domain (originated from different hosts) requests to the REST APIs provided by the plugin.</dd>
      <dt>Custom products</dt>
      <dd>Allow receiving orders with custom product prices and/or SKUs.</dd>
    </dl>


    [anchor:customizing_ecommerce_forms]

    <h2>Customizing e-commerce forms</h2>

    <p>To modify e-commerce forms copy the form templates located in the <em>templates</em> directory of the Verge3D plugin to your WordPress theme directory under the <em>verge3d</em> subdirectory.</p>

    <p>For example, if you need to modify order email template:</p>

    <code class="language-html">WORDPRESS/wp-content/plugins/verge3d/templates/order_email_body.php -> THEME/verge3d</code>

    <p>Where WORDPRESS is the root directory of your WordPress installation and THEME is the directory of your current theme.</p>

    <p>Here is the list of templates you can customize:</p>

    <table>
      <tr>
        <th>Template File</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>order_email_body.php</td>
        <td>Order email body template. This template used both for order notifications sent to you and to your customers.</td>
      </tr>
      <tr>
        <td>order_pdf.php</td>
        <td>Order email PDF attachment template. This template is used to generate HTML files which will be converted to PDF and attached to order emails.</td>
      </tr>
      <tr>
        <td>order_form.php</td>
        <td>Order form template. This form is displayed to you customers on the pages where <strong>[verge3d_order]</strong> shortcode is present.</td>
      </tr>
      <tr>
        <td>order_success.php</td>
        <td>Message displayed when the order was accepted.</td>
      </tr>
      <tr>
        <td>order_failed.php</td>
        <td>Message displayed when the order was rejected.</td>
      </tr>
    </table>

    <h3>Security Measures</h3>

    <p>When using custom forms for your e-commerce applications be sure to properly escape output data sent by your customers. Use the following <a href="https://developer.wordpress.org/plugins/security/securing-output/" target="_blank">guide</a> for more info.</p>

    [anchor:ecommerce_protocol_specification]

    <h2>E-commerce protocol specification</h2>

    <p>The <strong>place order</strong> and <strong>place order +</strong> puzzles use the following protocol to handle orders. Orders are sent from the browser to server using HTTP POST requests with the following parameters:</p>

    <table>
      <tr>
        <th>POST parameters</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>v3d_items</td>
        <td>Order items. A JSON-encoded array with order items.</td>
      </tr>
      <tr>
        <td>v3d_attachments[]</td>
        <td>Order attachments. This optional value must be an array of data URIs representing order attachments.
      </tr>
    </table>

    <p>
      The order item has one of the following formats, depending on the puzzle you use. For <strong>place order</strong>:
    </p>

    <table>
      <tr>
        <th>Fields</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>title</td>
        <td>Order item title.</td>
      </tr>
      <tr>
        <td>price</td>
        <td>Order item price.</td>
      </tr>
      <tr>
        <td>quantity</td>
        <td>Order item quantity: number of units, weight, length, etc.</td>
      </tr>
    </table>

    <p>
      For <strong>place order +</strong>:
    </p>

    <table>
      <tr>
        <th>Fields</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>sku</td>
        <td>Order item SKU (stock keeping unit). This SKU is used as an ID to retrieve information about the product from the server.</td>
      </tr>
      <tr>
        <td>quantity</td>
        <td>Order item quantity: number of units, weight, length, etc.</td>
      </tr>
    </table>

    <p>The more advanced JSON-based protocol uses the following set of parameters:</p>

    <table>
      <tr>
        <th>JSON fields</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>user_name</td>
        <td>Customer's full name (also used as billing name).</td>
      </tr>
      <tr>
        <td>user_email</td>
        <td>Customer's e-mail address.</td>
      </tr>
      <tr>
        <td>user_phone</td>
        <td>Customer's phone number.</td>
      </tr>
      <tr>
        <td>user_comment</td>
        <td>Optional order comments.</td>
      </tr>
      <tr>
        <td>items</td>
        <td>Order items. An array with order items.</td>
      </tr>
      <tr>
        <td>attachments</td>
        <td>Order attachments. This optional value must be an array of data URIs representing order attachments.
      </tr>
      <tr>
        <td>user_address1</td>
        <td>Billing address — line 1. In order to use this field, activate the *Billing address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>user_address2</td>
        <td>Billing address — line 2. In order to use this field, activate the *Billing address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>user_city</td>
        <td>Billing address — city. In order to use this field, activate the *Billing address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>user_state</td>
        <td>Billing address — state, county, or province. In order to use this field, activate the *Billing address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>user_country</td>
        <td>Billing address — country. In order to use this field, activate the *Billing address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>user_postcode</td>
        <td>Billing address — postcode/ZIP. In order to use this field, activate the *Billing address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>shipping_address1</td>
        <td>Shipping address — line 1. In order to use this field, activate the *Shipping address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>shipping_address2</td>
        <td>Shipping address — line 2. In order to use this field, activate the *Shipping address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>shipping_city</td>
        <td>Shipping address — city. In order to use this field, activate the *Shipping address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>shipping_state</td>
        <td>Shipping address — state, county, or province. In order to use this field, activate the *Shipping address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>shipping_country</td>
        <td>Shipping address — country. In order to use this field, activate the *Shipping address* option on the *General* tab.</td>
      </tr>
      <tr>
        <td>shipping_postcode</td>
        <td>Shipping address — postcode/ZIP. In order to use this field, activate the *Shipping address* option on the *General* tab.</td>
      </tr>
    </table>


  <h2>Got Questions?</h2>

  <p>Feel free to ask on the <a href="https://www.soft8soft.com/forums/" target="_blank">forums</a>!</p>


  </article></body>
</html>
