<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Пазлы сцены - Soft8Soft</title>
    <meta charset="utf-8">
    <meta name="description" content="Как выполнять различные операции со сценами и рендерингом с помощью пазлов Verge3D."/>
    <base href="../../../" />
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body><article>
    <h1>Пазлы Сцены</h1>

    <p>
      Пазлы из этой категории выполняют различные операции со сценами и рендерингом.
    </p>

    <img src="files/puzzles/puzzles-scenes.jpg">


    <h2>Содержание</h2>

    [contents]


    [anchor:puzzles_reference]

    <h2>Перечень Пазлов</h2>


    [anchor:load_scene]

    <h3>load scene + percentage</h3>

    <p>
      При срабатывании этого пазла текущая сцена выгружается, и загружается новая сцена из указанного файла <em>.gltf</em>.
    </p>

    <img src="files/puzzles/puzzles-scenes-load-scene.jpg">

    <p>
      После завершения загрузки запускаются пазлы в слоте "when loaded do". Кроме того, существует дополнительный слот "on progress do". Пазлы, помещенные в этот слот, постоянно срабатывают во время загрузки и могут задействовать пазл "percentage". После загрузки сцены ей присваивается имя, которое можно использовать для доступа и манипулирования сценой с помощью различных пазлов, связанных с объектами. По умолчанию присвоенное имя равно указанному URL сцены (например, 'path/to/scene.gltf'). Опция "alias", если она включена, позволяет задать имя вручную.
    </p>

    <p>
      Еще один дополнительный слот "on error do" срабатывает в случае ошибок загрузки (например, отсутствующий файл glTF).
    </p>


    <img src="files/puzzles/puzzles-scenes-load-scene-example.jpg">


    [anchor:append_scene]

    <h3>append scene + percentage</h3>

    <p>
    При срабатывании этого пазла новая сцена загружается из указанного файла <em>.gltf</em> и добавляется к текущей сцене.
    </p>

    <img src="files/puzzles/puzzles-scenes-append-scene.jpg">

    <p>
    После завершения загрузки запускаются пазлы в слоте "when loaded do". Также может быть включен слот "on progress do". Пазлы, помещенные в этот слот, постоянно срабатывают во время загрузки и могут использовать пазл "percentage". Пазл "append scene" по умолчанию не загружает камеры и свет из новой сцены. Это можно изменить в опциях пазла.
    </p>

    <p>
    После добавления сцены ей присваивается имя, которое может быть использовано для доступа и манипулирования сценой с помощью различных пазлов, связанных с объектами. По умолчанию присвоенное имя равно указанному URL сцены (например, 'path/to/scene.gltf'). Опция "alias", если она включена, позволяет задать имя вручную.
    </p>

    <p>
    Еще один дополнительный слот "on error do" срабатывает в случае ошибок загрузки (например, отсутствующий файл glTF).
    </p>


    <img src="files/puzzles/puzzles-scenes-append-scene-example.jpg">


    [anchor:unload_scene]

    <h3>unload scene</h3>

    <p>
      Выгружает указанную сцену или ее часть из
      приложения. Используйте пустое текстовое значение для выгрузки всех сцен.
    </p>

    <img src="files/puzzles/puzzles-scenes-unload-scene.jpg">



    [anchor:enable_rendering]

    <h3>enable rendering</h3>

    <p>
      Возобновляет ранее отключенный рендеринг.
    </p>

    <img src="files/puzzles/puzzles-scenes-enable-rendering.jpg">



    [anchor:disable_rendering]

    <h3>disable rendering</h3>

    <p>
    Отключает рендеринг. Графика не будет обновляться, но пользовательские события будут фиксироваться, а временная шкала анимации будет прогрессировать.
    </p>

    <img src="files/puzzles/puzzles-scenes-disable-rendering.jpg">

    <p>
      Вы можете использовать отключение рендеринга с целью экономии заряда батареи на мобильных устройствах или ноутбуках и избавления от шума кулера на настольных компьютерах. Вы также можете включить опцию *anti-alias*, чтобы значительно повысить качество рендеринга и компенсировать потерю производительности. Эта опция нацелена на следующий кадр после остановки рендеринга.
    </p>

    <img src="files/puzzles/puzzles-scenes-enable-disable-rendering-example.jpg">


    [anchor:create_environment]

    <h3>create environment</h3>

    <p>
      Создайте новое освещение на основе изображения и назначьте сцене фон. Этот пазл также создает новый материал с именем, указанным в качестве первого параметра, и добавляет его в сцену. Вы можете использовать этот материал для замены текстур или цветов окружения.
    </p>

    <p>
      Второй параметр может быть любым:
    </p>

    <ul>
      <li>*color*—освещение окружения будет основано на HDR-изображении 256×128 по умолчанию, фон будет основан на значении серого цвета по умолчанию.</li>
      <li>*texture*—и освещение среды, и фон будут основаны на стандартном HDR-изображении 256×128.</li>
    </ul>

    <img src="files/puzzles/puzzles-scenes-create-environment-example.jpg">


    [anchor:batch_geometry]

    <h3>batch geometry</h3>

    <p>
      Слияние геометрии указанной группы мешей для повышения производительности рендеринга. При выполнении пазл собирает меши с похожими свойствами, такими как используемый материал, настройки тени, порядок рендеринга и т.д., затем создает и добавляет новую группу в сцену. Объекты, которые не могут быть объединены вместе, остаются нетронутыми.
    </p>

    <img src="files/puzzles/puzzles-scenes-batch-geometry.jpg">

    <p>
      Чтобы увидеть, как работает пакетная обработка, просто откройте <a href="manual/ru/introduction/FAQ.html#browser_console">браузерную консоль</a>:
    </p>

    <img src="files/puzzles/puzzles-scenes-batch-geometry-console.jpg">

    <p>
      В каждой строке "Adding batch object..." можно увидеть имя создаваемого пакетного объекта. Это имя состоит из названия материала, образующего пакет, коэффициента 'x', представляющего количество мешей, объединенных вместе, и постфикса "_batch".</p>

    <p>
      Например:
    </p>

    <code class="language-html">
      Adding batch object: big_table_wood_x6_batch
    </code>

    <p>
      строка означает, что 6 мешей с материалом "big_table_wood" были объединены в новый пакетный объект "big_table_wood_x6_batch".
    </p>

    <p class="note">
      Поскольку части пакета становятся "закрепленными" вместе, убедитесь, что вы не объединяете в пакет объекты, которые вы планируете перемещать, анимировать или изменять отдельно от пакета.
    </p>


    [anchor:export_to_gltf]

    <h3>export to gltf</h3>

    <p>
      Экспортирует сцену, модель или группу моделей в формат glTF 2.0. Укажите опцию *only visible* для экспорта только видимых объектов, опция *binary* используется для экспорта в формат GLB (glTF Binary).
    </p>

    <p>
      Для достижения наилучших результатов, а также для создания стандартных файлов glTF (без расширений Soft8Soft/Verge3D), которые могут просматриваться сторонними программами просмотра glTF (например, программой просмотра glTF по умолчанию в Microsoft Windows 10), мы рекомендуем вам использовать материалы, совместимые с glTF. Посмотрите, как их создавать в <a href="manual/ru/blender/GLTF-Materials.html">Blender</a>, <a href="manual/ru/max/GLTF-Materials.html">3ds Max</a>, or <a href="manual/ru/maya/GLTF-Materials.html">Maya</a>.
    </p>

    <img src="files/puzzles/puzzles-scenes-export-to-gltf.jpg">


    [anchor:raycast]

    <h3>raycast</h3>

    <p>
      Проводит луч из исходной точки (или объекта) в заданном направлении и отображает список всех пересечений (если они есть). Третий параметр пазла используется для уменьшения количества пересекаемых объектов. Оставьте <strong>none</strong> или укажите имя вашей сцены, чтобы пересечь все объекты, расположенные в загруженной сцене.
    </p>

    <p>
      Отображаемый список содержит последовательность словарей со следующей информацией:
    </p>

    <ul>
      <li>*object* — имя пересекаемого объекта</li>
      <li>*distance* — расстояние до точки пересечения</li>
      <li>*point* — XYZ координаты (вектор) точки пересечения</li>
      <li>*normal* — XYZ координаты (вектор) нормали в точке пересечения</li>
      <li>*uv* — UV координаты точки пересечения</li>
    </ul>

    <p>Список пересечений отсортирован по расстоянию - от ближайшего.</p>

    <img src="files/puzzles/puzzles-scenes-raycast.jpg">


    [anchor:add_fog]

    <h3>add fog</h3>

    <p>
      Добавляет эффект тумана к сцене. Проставьте нули либо для <b>RGB</b>, либо для
        <b>density</b>, чтобы отключить добавление тумана.
    </p>

    <img src="files/puzzles/puzzles-scenes-add-fog.jpg">


    <h2>Проблема с Пазлами?</h2>

    <p>Обращайтесь за помощью на наш <a href="https://www.soft8soft.com/forums/" target="_blank">форум</a>!</p>

  </article></body>
</html>
