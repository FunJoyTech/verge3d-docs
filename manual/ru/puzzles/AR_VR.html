<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>AR/VR Пазлы - Soft8Soft</title>
    <meta charset="utf-8">
    <meta name="description" content="How to enable and use the augmented reality and virtual reality modes in Puzzles."/>
    <base href="../../../" />
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body><article>

    <h1>AR/VR Пазлы</h1>

    <p>Эти пазлы используются для создания дополненной реальности (AR) и виртуальной реальности (VR), работающих поверх экспериментального браузерного API - WebXR (eXtended Reality on the Web).</p>

    <img src="files/puzzles/puzzles-ar-vr.jpg">

    <p>
      Для получения дополнительной информации о поддерживаемых устройствах VR и лучших методах смотрите <a href="manual/ru/introduction/AR-VR-development.html">соответствующий раздел</a> данного руководства пользователя.
    </p>

    <h2>Содержание</h2>

    [contents]


    [anchor:puzzles_reference]

    <h2>Перечень Пазлов</h2>

    [anchor:check_vr_mode]

    <h3>check VR mode</h3>

    <p>
      Проверяет систему виртуальной реальности. В случае успеха запускаются пазлы в слоте *if available do*. В противном случае, если браузер не поддерживает VR или оборудование VR не найдено, запускаются пазлы в слоте *if unavailable do*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-check-vr-mode.jpg">



    [anchor:enter_vr_mode]

    <h3>enter VR mode</h3>

    <p>
      Входит в режим виртуальной реальности. Пазлы, размещенные в слотах *on enter do* и *on exit do*, срабатывают при входе или выходе из режима VR. Пазлы, размещенные в слоте *если недоступен*, срабатывают, если сеанс VR не удалось установить.
    </p>

    <p>Режимы позиционирования VR:</p>

    <dl>
      <dt>
        sitting or standing
      </dt>
      <dd>
        неподвижная камера, расположенная на некоторой высоте над землей.
      </dd>
      <dt>
        room
      </dt>
      <dd>
        мобильная камера, расположенная внутри определенных границ, например, комнаты (например, для HTC Vive, Oculus Quest).
      </dd>
      <dt>
        looking around
      </dt>
      <dd>
        неподвижная камера, расположенная в нулевых координатах.
      </dd>
      <dt>
        walking
      </dt>
      <dd>мобильная камера без ограничений.
      </dd>
      <dt>
        viewer locked
      </dt>
      <dd>
        неподвижная камера, расположенная в нулевых координатах. Все содержимое является родительским для вида.
      </dd>
    </dl>

    <p>
      Числовой параметр *hover to click after* обозначает период времени (в секундах), в течение которого объект, над которым наведен прицел VR, будет получать событие щелчка мыши. Значение по умолчанию *Infinity* означает отсутствие преобразования наведения в щелчок. 
    </p>

    <img src="files/puzzles/puzzles-ar-vr-enter-vr-mode.jpg">

    <p>
      Чтобы правильно управлять камерой в режиме VR, при входе в режим VR обязательно привяжите ее к какому-либо пустому или реальному объекту, расположенному в выбранном вами 3D-редакторе. Это необходимо потому, что в VR-сессии камера полностью контролируется, а вы можете перемещать только пустой объект, к которому привязана камера.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-enter-vr-mode-example.jpg">



    [anchor:end_vr_session]

    <h3>end VR session</h3>

    <p>
      Завершает сеанс виртуальной реальности.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-end-vr-session.jpg">



    [anchor:check_ar_mode]

    <h3>check AR mode</h3>

    <p>
      Проверяет систему дополненной реальности. В случае успеха запускаются пазлы в слоте *if available do*. В противном случае, если браузер не поддерживает AR или оборудование AR не найдено, срабатывают пазлы в слоте *if unavailable do*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-check-ar-mode.jpg">



    [anchor:enter_ar_mode]

    <h3>enter AR mode</h3>

    <p>
      Входит в режим дополненной реальности. Пазлы, размещенные в слотах *on enter do* и *on exit do*, срабатывают при входе или выходе из режима AR. Пазлы, размещенные в слоте *if unavailable do*, срабатывают, если не удалось установить сеанс AR.
    </p>

    <p>
      Свойство *allow HTML* используется для отображения HTML-контента в режиме AR. Если указано, содержимое элемента <em>canvas container</em> будет отображаться поверх 3D-контента. Этот параметр считается экспериментальным.
    </p>

    <p>Режимы позиционирования AR:</p>

    <dl>
      <dt>
        sitting or standing
      </dt>
      <dd>
        неподвижная камера, расположенная на некоторой высоте над землей.
      </dd>
      <dt>
        room
      </dt>
      <dd>
        мобильная камера, расположенная внутри некоторых границ, таких как комната.
      </dd>
      <dt>
        looking around
      </dt>
      <dd>
        неподвижная камера, расположенная в нулевых координатах.
      </dd>
      <dt>
        walking
      </dt>
      <dd>
        мобильная камера без ограничений.
      </dd>
      <dt>
        viewer locked
      </dt>
      <dd>
        неподвижная камера, расположенная в нулевых координатах. Все содержимое является родительским для вида.
      </dd>
    </dl>

    <img src="files/puzzles/puzzles-ar-vr-enter-ar-mode.jpg">


    [anchor:ar_hit_test]

    <h3>detect horizontal surface AR</h3>

    <p>
      Обнаружение горизонтальных поверхностей в режиме AR путем направления луча вперед. При пересечении этот луч запускает пазлы в слоте *on intersection do*. Если пересечения не произошло или устройство находится в состоянии разогрева, пазлы срабатывают в слоте *if missed do*.
    </p>

    <p>
      Параметр *smooth* используется для того, чтобы сделать движение маркера AR более плавным. Укажите значение 0 для отключения сглаживания, значение, близкое к 1, для максимального сглаживания.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-ar-hit-test.jpg">



    [anchor:ar_hit_point]

    <h3>AR hit point</h3>

    <p>
      Координата(ы) точки поверхности, обнаруженная(ые) с помощью пазла <a href="manual/ru/puzzles/AR_VR.html#ar_hit_test">detect horizontal surface AR</a>. Может быть значением *X*, *Y*, *Z* или вектором *XYZ*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-ar-hit-point.jpg">



    [anchor:session_event]

    <h3>on session event</h3>

    <p>
      Захватывает событие сессии VR, сгенерированное устройством VR (например, гарнитурой или кнопкой контроллера), и запускает пазлы, указанные в слоте *do*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-on-session-event.jpg">

    <p>Events:</p>

    <ul>
      <li>*select* - срабатывает, когда пользователь нажимает и отпускает кнопку основного контроллера.</li>
      <li>*selectstart* - срабатывает при нажатии пользователем кнопки основного контроллера.</li>
      <li>*selectend* - срабатывает, когда пользователь отпускает основную кнопку контроллера.</li>
      <li>*squeeze* - срабатывает, когда пользователь сжимает и разжимает контроллер.</li>
      <li>*squeezestart* - срабатывает, когда пользователь сжимает контроллер.</li>
      <li>*squeezeend* - срабатывает, когда пользователь разжимает контроллер.</li>
      <li>*connected* - срабатывает при подключении контроллера VR, т.е. при входе в сеанс VR. Используйте это событие для инициализации любой логики контроллера.</li>
      <li>*disconnected* - срабатывает при отключении контроллера VR.</li>
    </ul>


    [anchor:traverse_controllers]

    <h3>traverse controllers</h3>

    <p>
      Переберите все подключенные контроллеры VR, выполните пазлы, указанные в слоте *do*.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-traverse-controllers.jpg" class="centered" style="max-width: 825px">


    [anchor:get_controller_prop]

    <h3>get controller property</h3>

    <p>
      Получите свойство контроллера.
    </p>

    <img src="files/puzzles/puzzles-ar-vr-get-controller-prop.jpg" class="centered" style="max-width: 819px">

    <p>Свойства:</p>

    <ul>
      <li>*object* -  пустой объект, представляющий контроллер.
      <li>*ray/reticle* - луч контроллера или объект прицела.
      <li>*handedness* - ориентация контроллера, одна из: "left" (левый контроллер), "right" (правый контроллер), "none" (не указано, вероятно, контроллер, установленный на голове).
      <li>*target ray mode* - один из: "gaze" (для устройств, типа cardboard), "tracked-pointer" (для обычных ручных контроллеров), "screen" (событие связано с вводом на холсте, в настоящее время не реализовано).
      <li>*profiles* - список имен профилей контроллеров.
      <li>*gamepad index* - индекс геймпада контроллера, который может быть передан в пазл <a href="manual/ru/puzzles/System.html#get_gamepad_prop">get gamepad property</a> для получения дополнительной информации от вашего контроллера, такой как состояние кнопок/осей.</li>
    </ul>


    <h2>Проблема с Пазлами?</h2>

    <p>Обращайтесь за помощью на наш <a href="https://www.soft8soft.com/forums/" target="_blank">форум</a>!</p>


  </article></body>
</html>
