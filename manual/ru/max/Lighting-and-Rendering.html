<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Verge3D для 3ds Max: Освещение и Рендеринг - Soft8Soft</title>
    <meta charset="utf-8">
    <meta name="description" content="This page contains the information about 3ds Max' Lighting and rendering settings supported in Verge3D."/>
    <base href="../../../" />
    <script src="page.js"></script>
    <link type="text/css" rel="stylesheet" href="page.css" />
  </head>
  <body><article>

    <h1>Освещение и Рендеринг / 3ds Max</h1>

    <p>
      Данная страница содержит информацию об освещении и визуализации в 3ds Max, которые могут быть использованы в Verge3D. 
    </p>

    [contents]


    [anchor:renderers]

    <h2>Рендереры</h2>

    <p>
      Verge3D поддерживает три рендера, предоставляемые 3ds Max: *Scanline*, *ART* (рекомендуется) и *Arnold*. Рендерер Scanline предназначен для использования со стандартным освещением и материалами, а ART/Arnold обычно используется с фотометрическим освещением и физическими материалами.
    </p>

    <p>
      Выбор правильного рендерера - это первое, о чем следует подумать перед началом работы с графикой. Если вы не уверены, какой рендерер выбрать, мы рекомендуем использовать ART. Чтобы установить рендерер в 3ds Max, используйте окно <a href="manual/ru/max/Viewport-Render-Preview.html#Scanline_ART_Rendering">"Render Setup..."</a>.
    </p>



    [anchor:environment_lighting]

    <h2>Освещение Окружающей Среды</h2>

    <p>
      Освещение окружения - очень важный компонент графического пайплайна в Verge3D, основанного на ART/физических материалах. Вы можете освещать сцену только с помощью карты окружения, не используя никаких световых объектов (как в демонстрации <a href="https://www.soft8soft.com/gallery/scooter-3d-product-customizer/" target="_blank">Scooter demo</a>).
    </p>

    <iframe class="video-480p" src="https://www.youtube.com/embed/TqqdzI5kgH0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

    <p>
      Проект-шаблон куб по умолчанию содержит HDR-текстуру для освещения на основе изображения. Вы можете заменить эту текстуру собственным файлом или настроить освещение окружения с нуля, как показано в этом <a href="https://www.youtube.com/watch?v=s_QjxCr8I6k" target="_blank">видеоролике</a>.
    </p>

    [anchor:lights]

    <h2>Источники Освещения</h2>

    <p>
      Если вы хотите получить динамические тени в сцене, или если вам нужно переместить источник света (как в случае с автомобильными фарами), вы можете использовать <a href="https://knowledge.autodesk.com/support/3ds-max/learn-explore/caas/CloudHelp/cloudhelp/2020/ENU/3DSMax-Lighting-Shading/files/GUID-57B15284-C5F3-46A8-BBD3-6333FE5E80DE-htm.html" target="_blank">световые объекты</a>.
    </p>

    <p>
    Verge3D поддерживает два типа источников освещения предоставляемых 3ds Max: *standard* и *photometric*.
    </p>


    [anchor:photometric_lights]

    <h3>Photometric Lights</h3>

    <p>
      Photometric lights обычно используются с <a href="manual/ru/max/Materials-Maps-Reference.html#Physical">Физическими материалами</a>. Verge3D воспроизводит их, используя ART-рендерер 3ds Max в качестве эталона. Кроме того, вы можете использовать настройки Physical Camera <a href="https://knowledge.autodesk.com/support/3ds-max/learn-explore/caas/CloudHelp/cloudhelp/2020/ENU/3DSMax-Rendering/files/GUID-E1A6D466-CABB-4C8A-97A9-0C191C69F9BD-htm.html" target="_blank">Expose Control</a> для настройки яркости и цветового диапазона ваших рендеров.
    </p>


    [anchor:standard_lights]

    <h3>Standard Lights</h3>

    <p>
      Standard lights обычно используются со <a href="manual/ru/max/Materials-Maps-Reference.html#Standard">Стандартными материалами</a>. Verge3D воспроизводит их, используя в качестве эталона рендер Scanline в 3ds Max.
    </p>


    [anchor:light_probes]

    <h2>Light Probes</h2>

    <p>
      Дополнение Verge3D добавляет пользовательский объект датчика света под названием *V3DReflectionCubemap*, который можно использовать для применения косвенного освещения к объектам через локальную кубическую карту отражений.<br/><br/>

      Этот объект можно найти используя *Create* panel -> *Helpers* category ->
      *Verge3D*:
    </p>

    <img src="files/lighting-max/light-probe-reflection-cubemap-create.png" class="centered" style="max-width: 351px">

    <p>
      Объект отражения cubemap определяет объем влияния, представленный box или sphere. Все объекты, находящиеся внутри этого объема, будут использовать локальную кубическую карту отражения, созданную во время запуска, вместо глобальной текстуры/цвета окружения сцены.<br/><br/>

      Преимущество использования локальной карты отражения заключается в том, что на ней прорисованы окружающие объекты, в то время как глобальная карта сцены содержит только фоновую текстуру/цвет, указанный в настройках окружения Max. Локальные карты отражения также имеют эффект параллакса в зависимости от геометрии <a href="manual/ru/max/Lighting-and-Rendering.html#influence_volume">влияния</a> или <a href="manual/ru/max/Lighting-and-Rendering.html#parallax_volume">параллаксного</a> объема. 
    </p>

    <img src="files/lighting-max/light-probe-reflection-cubemap-effect.png" class="centered" style="max-width: 915px">
    <span class="img-caption">
      Cлева - отражающий объект cubemap во вьюпорте Max, справа - эффект, который он добавляет к отражающему материалу в Verge3D.
    </span>

    <p>
      Объекты Reflection Cubemap имеют следующие параметры: 
    </p>

    <img src="files/lighting-max/light-probe-reflection-cubemap-params.png" class="centered" style="max-width: 335px">

    <dl>
      <dt>General</dt>
      <dd>
        general probe settings:

        <dl>
          <dt id="influence_volume">Influence Type</dt>
          <dd>
            Тип объема влияния: *Sphere* или *Box*. Освещение зонда влияет только на объекты, расположенные внутри этого объема.
          </dd>

          <dt>Influence Distance</dt>
          <dd>
            Размер объема влияния. Можно также изменить масштабирование объекта и сделать форму объема влияния неоднородной.
          </dd>

          <dt>Intensity</dt>
          <dd>
            Интенсивность косвенного освещения. Любое значение, отличное от 1,0 не является физически корректным.
          </dd>

          <dt>Clipping Start</dt>
          <dd>
            Расстояние до отсечения. Объекты, расположенные ближе, чем это значение, не будут отображаться в кубической карте отражения. 
          </dd>

          <dt>Clipping End</dt>
          <dd>
            Дальнее расстояние отсечения. Объекты, расположенные дальше этого значения, не будут отображаться в кубической карте отражения.
          </dd>
        </dl>
      </dd>

      <dt>Visibility Selection Set</dt>
      <dd>
        Настройки видимости объекта: 

        <dl>
          <dt>Selection Set</dt>
          <dd>
            Ограничить объекты, которые должны появиться на кубокарте отражения, только теми, которые принадлежат этому сету. Выберите опцию пустой строки (""), чтобы не указывать никакого набора объектов - в этом случае все объекты сцены будут использованы для создания кубической карты отражения. 
          </dd>

          <dt>Invert Visibility</dt>
          <dd>
            Инвертировать выбор объектов, видимых этим зондом, если *election Set*.
          </dd>
        </dl>
      </dd>

      <dt id="parallax_volume">Custom Parallax</dt>
      <dd>
        parallax settings:

        <dl>
          <dt>Enable Custom Parallax</dt>
          <dd>
            включить пользовательские настройки для коррекции параллакса. Эта группа настроек определяет объем параллакса, который используется для проецирования освещения, захваченного датчиком. Если функция *Custom Parallax* не включена эффект параллакса рассчитывается на основе *Influence Type* и *Influence Distance*.
          </dd>

          <dt>Parallax Type</dt>
          <dd>
            тип параллактического объема: *Sphere* или *Box*.
          </dd>

          <dt>Parallax Distance</dt>
          <dd>
            размер параллактического объема.
          </dd>
        </dl>
      </dd>
    </dl>


    [anchor:per_object_rendering_settings]

    <h2>Настройки Рендеринга для Каждого Объекта</h2>

    <img src="files/lighting-max/rendering-settings.jpg" class="centered" style="max-width: 319px">

    <p>*Render Order* — изменяет порядок рендеринга для конкретного объекта. Чем меньше индекс, тем раньше будет отрисован объект. В большинстве случаев это значение необходимо подстроить при использовании прозрачности Blend для устранения артефактов прозрачности.</p>

    <p>*Frustum Culling* — включает/выключает оптимизацию фруструм кулинга. Снимите этот флажок, если у вас есть какой-либо обтекаемый объект, который может выходить за пределы экранного пространства, чтобы предотвратить его обтекание. 
    </p>


    [anchor:global_rendering_settings]

    <h2>Глобальные Настройки Рендеринга</h2>

    <p>Глобальные настройки рендеринга, доступные из диалогового окна *Verge3D Export Settings* (<strong>Verge3D->Export Settings...</strong> в меню 3ds Max).</p>

    <img src="files/lighting-max/rendering-settings-global.jpg" class="centered" style="max-width: 252px">

    <p><strong>Anti-Aliasing</strong> — выберите, какой алгоритм сглаживания использовать для сцены:</p>

    <ul>
      <li>*Auto* — использовать системный метод по умолчанию.</li>
      <li>*MSAA 4x* — использовать мультисэмпловое сглаживание с 4x сэмплами, если целевое оборудование поддерживает его.</li>
      <li>*MSAA 8x* — использовать мультисэмпловое сглаживание с 8x сэмплами, если целевое оборудование поддерживает его.</li>
      <li>*MSAA 16x* — использовать мультисэмпловое сглаживание с 16x сэмплами, если целевое оборудование поддерживает его.</li>
      <li>*FXAA* — использовать FXAA.</li>
      <li>*None* — отключить сглаживание.</li>
    </ul>

    <p>*Use HDR Rendering* — включить рендеринг с высоким динамическим диапазоном.</p>

    <p>*Environment Map Size* — размер текстуры для использования при освещении окружения:</p>

    <ul>
      <li>*256* — оптимальное качество при низком потреблении памяти (рекомендовано)..</li>
      <li>*512* — лучшее качество при умеренном потреблении памяти и снижении производительности. Используйте его для рендеринга отражений высокого качества, например, для рендеринга ювелирных изделий.</li>
      <li>*1024* — наилучшее качество при высоком потреблении памяти и низкой производительности (как правило, не рекомендуется).</li>
    </ul>

    <p>*IBL Environment Mode*</p>

    <ul>
      <li><strong>PMREM (медленный)</strong> — высокое качество (значение по умолчанию)..</li>
      <li><strong>Light Probe + Cubemap (умеренный)</strong> — снижение качества зеркальных отражений на основе изображений, лучшая производительность.</li>
      <li><strong>Light Probe (быстрый)</strong> — отключение зеркальных отражений на основе изображений, высочайшая производительность.</li>
    </ul>

    <p>*Object Outlining* — читайте ниже.</p>


    [anchor:outline_rendering]

    <h2>Outline Rendering (Визуализация Контура)</h2>

    <p>
      Контурный рендеринг (он же рендеринг края силуэта) - это распространенная техника нефотореалистичного рендеринга (NPR), которая может значительно улучшить визуальное восприятие вашей сцены. Этот эффект можно использовать в различных приложениях, таких как электронное обучение, игры, архитектурная визуализация и техническое рисование.
    </p>

    <p>
      Чтобы использовать обводку объекта (и дополнительное свечение) в приложении Verge3D, сначала включите эффект на панели *Render Properties* в Blender, затем используйте пазл <a href="manual/ru/puzzles/Objects.html#outline">outline</a>, чтобы применить его к объекту (объектам).
    </p>

    <p class="note">
      Контурный рендеринг не работает в AR/VR. Используйте другие методы выделения объектов, например анимацию или изменение цвета материала.
    </p>

    <img src="files/lighting-blender/outline-example.jpg" class="centered" style="max-width: 819px">

    <p>Настроить контур можно с помощью следующих свойств:</p>

    <p>*Enabled* —  включить/выключить эффект.</p>

    <p>*Edge Strength* — фактор силы контура.</p>

    <p>*Edge Glow* —  интенсивность дополнительного свечения (отрисовывается за пределами основного края контура).</p>

    <p>*Edge Thickness* — коэффициент толщины края контура.</p>

    <p>*Pulse Period* — период импульса в секундах. Укажите, чтобы сделать эффект анимированным.</p>

    <p>*Visible Edge Color* — цвет видимого контура.</p>

    <p>*Hidden Edge Color* — цвет края контура, отображаемого за любыми другими объектами сцены.</p>

    <p>*Render Hidden Edge* — включить/выключить отрисовку края контура за другими объектами сцены.</p>

    <p class="note">
      Хотя светящиеся объекты можно рендерить, в большинстве случаев контурный рендеринг используется для улучшения визуальной четкости сцены. Если вам нужно свечение от ламп или других ярких объектов, подумайте об использовании <a href="manual/ru/puzzles/Postprocessing.html#bloom">bloom post-processing</a>.


    [anchor:exposure_control]

    <h2>Контроль экспозиции</h2>

    <p>Verge3D в 3ds Max поддерживает следующие алгоритмы управления экспозицией:</p>

    <ul>
      <li>*Physical Camera Exposure Control*</li>
      <li>*Logarithmic Exposure Control*</li>
    </ul>

    <p>Дополнительные сведения о том, как настроить элементы управления экспозицией для сцены, см. в официальной <a href="https://knowledge.autodesk.com/support/3ds-max/learn-explore/caas/CloudHelp/cloudhelp/2021/ENU/3DSMax-Rendering/files/GUID-E1A6D466-CABB-4C8A-97A9-0C191C69F9BD-htm.html" target="_blank">документации</a> Autodesk.
    </p>


    [anchor:clipping_planes]

    <h2>Clipping Planes (Секущие Плоскости)</h2>

    <p>
      Секущие плоскости (они же плоскости сечений) - это способ, используемый для отображения внутреннего устройства сложных объектов, таких как здания, автомобили, приборы, гаджеты, машины и т.д. 
    </p>

    <img src="files/lighting-max/clipping-plane-example.jpg" class="centered">

    <p>
      Чтобы добавить новую плоскость обрезания, используйте кнопку <strong>Create -> Helpers -> Verge3D -> ClippingPlane</strong> в 3ds Max:
    </p>

    <img src="files/lighting-max/clipping-plane-new.jpg" class="centered" style="max-width: 311px">

    <p>
      Объекты в вашей сцене будут обрезаны в отрицательном направлении *Z* объекта плоскости сечения. 
    </p>

    <p>
      Плоскости сечения обладают следующими свойствами:
    </p>

    <dl>
      <dt>Affected Objects</dt>
      <dd>
        Коллекция объектов, с которыми будет взаимодействовать секущая плоскость. Если коллекция не назначена, все объекты сцены будут обрезаны.
      <dt>Negated</dt>
      <dd>
        Поменять местами обрезанную и необрезанную стороны.
      </dd>
      <dt>Clip Shadows</dt>
      <dd>
        Обрезать тени, отбрасываемые обрезанными объектами.
      </dd>
      <dt>Union Planes</dt>
      <dd>
        Постройте объединение из всех плоскостей сечения, воздействуя на объект, а не на их пересечение.
      </dd>
      <dt>Cross-Section</dt>
      <dd>
        Заполните отверстие образованное секущей плоскостью в затронутых объектах.
      </dd>
      <dt>Cross-Section Color</dt>
      <dd>
        Цвет и прозрачность поперечного сечения.
      </dd>
      <dt>Cross-Sect. Size</dt>
      <dd>
        Размер плоскости сечения. Увеличьте это значение, если вы используете сцену большего размера.
      </dd>
    </dl>


    <h2>Остались вопросы?</h2>

    <p>Задайте их на нашем <a href="https://www.soft8soft.com/forums/" target="_blank">форуме</a>!</p>


  </article></body>
</html>
